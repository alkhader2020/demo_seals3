"use client"

import { useState, useEffect } from "react"
import Link from "next/link"
import { Button } from "@/components/ui/button"
import { Card, CardContent, CardHeader, CardTitle } from "@/components/ui/card"
import { Badge } from "@/components/ui/badge"
import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from "@/components/ui/select"
import { ArrowLeft, Users, Trophy, TrendingUp, Download, BarChart3, Target, Award, BookOpen, FileText, MessageSquare, User } from "lucide-react"

// å®šä¹‰ç±»å‹æ¥å£
interface TrainingRecord {
  id: string;
  title: string;
  date: string;
  duration: string;
  score: number;
  status: string;
  questions: number;
  correct?: number;
  feedback: string;
  attitude?: string;
  scenarios?: number;
}

interface Skills {
  product: number;
  communication: number;
  objection: number;
  closing: number;
}

interface RankingMember {
  rank: number;
  name: string;
  department: string;
  overallScore: number;
  completionRate: number;
  improvement: number;
  skills: Skills;
}

interface DepartmentStat {
  department: string;
  members: number;
  averageScore: number;
  completionRate: number;
  topSkill: string;
}

interface TeamOverview {
  totalMembers: number;
  averageScore: number;
  completionRate: number;
  topPerformer: string;
  trainingCount: number;
  highestScore: number;
  highestScoreDate: string;
  dialogueCount: number;
  dialogueAvgScore: number;
  rolePlayCount: number;
  rolePlayAvgScore: number;
}

interface TeamData {
  overview: TeamOverview;
  trainingRecords: TrainingRecord[];
  openTrainingRecords: TrainingRecord[];
  rankings: RankingMember[];
  departmentStats: DepartmentStat[];
}

interface TrainingData {
  type: string;
  time: string;
  points: number;
  accuracy: number;
  feedback: string;
}

export default function TeamAnalysisPage() {
  const [selectedTask, setSelectedTask] = useState<string>("all")
  const [showNotification, setShowNotification] = useState<boolean>(false)
  const [pointsAwarded, setPointsAwarded] = useState<number>(0)
  const [showTrainingNotification, setShowTrainingNotification] = useState<boolean>(false)
  const [trainingData, setTrainingData] = useState<TrainingData>({
    type: "é”€å”®åŸºç¡€åŸ¹è®­ :é€‰æ‹©é¢˜è®­ç»ƒ",
    time: "",
    points: 0,
    accuracy: 0,
    feedback: ""
  })

  // æ¨¡æ‹Ÿå›¢é˜Ÿæ•°æ®
  const teamData: TeamData = {
    overview: {
      totalMembers: 15,
      averageScore: 82,
      completionRate: 87,
      topPerformer: "å¼ ä¸‰",
      trainingCount: 24,
      highestScore: 92,
      highestScoreDate: "2023-10-15",
      dialogueCount: 8,
      dialogueAvgScore: 84,
      rolePlayCount: 6,
      rolePlayAvgScore: 86,
    },
    // åŸ¹è®­è®°å½•æ•°æ®
    trainingRecords: [
      {
        id: "1",
        title: "äº§å“çŸ¥è¯†é€‰æ‹©é¢˜è®­ç»ƒ",
        date: "2023-10-15",
        duration: "30åˆ†é’Ÿ",
        score: 92,
        status: "å·²å®Œæˆ",
        questions: 20,
        correct: 18,
        feedback: "äº§å“çŸ¥è¯†æŒæ¡ä¼˜ç§€ï¼Œå¯¹æ–°äº§å“ç‰¹æ€§ç†è§£é€å½»ï¼Œç»§ç»­ä¿æŒï¼"
      },
      {
        id: "2",
        title: "é”€å”®æŠ€å·§é€‰æ‹©é¢˜è®­ç»ƒ",
        date: "2023-10-10",
        duration: "25åˆ†é’Ÿ",
        score: 85,
        status: "å·²å®Œæˆ",
        questions: 15,
        correct: 13,
        feedback: "é”€å”®æŠ€å·§æŒæ¡è‰¯å¥½ï¼Œå»ºè®®åŠ å¼ºå®¢æˆ·éœ€æ±‚åˆ†ææ–¹é¢çš„è®­ç»ƒã€‚"
      },
      {
        id: "3",
        title: "å®¢æˆ·æ²Ÿé€šé€‰æ‹©é¢˜è®­ç»ƒ",
        date: "2023-10-05",
        duration: "35åˆ†é’Ÿ",
        score: 78,
        status: "å·²å®Œæˆ",
        questions: 20,
        correct: 16,
        feedback: "æ²Ÿé€šåŸºç¡€çŸ¥è¯†æŒæ¡å°šå¯ï¼Œä½†åœ¨å¤„ç†å¤æ‚å®¢æˆ·åœºæ™¯æ–¹é¢éœ€è¦æå‡ã€‚"
      },
      {
        id: "4",
        title: "å¼‚è®®å¤„ç†é€‰æ‹©é¢˜è®­ç»ƒ",
        date: "2023-09-28",
        duration: "40åˆ†é’Ÿ",
        score: 88,
        status: "å·²å®Œæˆ",
        questions: 25,
        correct: 22,
        feedback: "å¼‚è®®å¤„ç†èƒ½åŠ›è¾ƒå¼ºï¼Œèƒ½å¤Ÿè¯†åˆ«å¸¸è§å®¢æˆ·å¼‚è®®å¹¶æä¾›æœ‰æ•ˆè§£å†³æ–¹æ¡ˆã€‚"
      }
    ],
    // å¼€æ”¾é—®ç­”è®­ç»ƒæ•°æ®
    openTrainingRecords: [
      {
        id: "1",
        title: "äº§å“çŸ¥è¯†å¼€æ”¾é—®ç­”è®­ç»ƒ",
        date: "2023-10-12",
        duration: "45åˆ†é’Ÿ",
        score: 88,
        status: "å·²å®Œæˆ",
        questions: 5,
        feedback: "äº§å“çŸ¥è¯†å›ç­”å…¨é¢ï¼Œé€»è¾‘æ¸…æ™°ï¼Œå¯¹äº§å“ä¼˜åŠ¿çš„é˜è¿°éå¸¸åˆ°ä½ã€‚å»ºè®®åœ¨ç»†èŠ‚æ–¹é¢å¤šåŠ å…³æ³¨ã€‚"
      },
      {
        id: "2",
        title: "é”€å”®åœºæ™¯å¼€æ”¾é—®ç­”è®­ç»ƒ",
        date: "2023-10-07",
        duration: "50åˆ†é’Ÿ",
        score: 82,
        status: "å·²å®Œæˆ",
        questions: 4,
        feedback: "é”€å”®åœºæ™¯åˆ†æåˆç†ï¼Œè§£å†³æ–¹æ¡ˆå…·æœ‰å¯è¡Œæ€§ã€‚åœ¨åº”å¯¹å¤æ‚å®¢æˆ·éœ€æ±‚æ—¶å¯ä»¥æ›´åŠ çµæ´»ã€‚"
      },
      {
        id: "3",
        title: "å®¢æˆ·æ²Ÿé€šå¼€æ”¾é—®ç­”è®­ç»ƒ",
        date: "2023-10-02",
        duration: "40åˆ†é’Ÿ",
        score: 76,
        status: "å·²å®Œæˆ",
        questions: 5,
        feedback: "æ²Ÿé€šç­–ç•¥åŸºæœ¬æ­£ç¡®ï¼Œä½†åœ¨å¤„ç†å®¢æˆ·å¼‚è®®æ—¶çš„å›åº”ç•¥æ˜¾ç”Ÿç¡¬ï¼Œéœ€è¦æ›´åŠ è‡ªç„¶æµç•…ã€‚"
      },
      {
        id: "4",
        title: "é”€å”®æµç¨‹å¼€æ”¾é—®ç­”è®­ç»ƒ",
        date: "2023-09-25",
        duration: "55åˆ†é’Ÿ",
        score: 90,
        status: "å·²å®Œæˆ",
        questions: 6,
        feedback: "é”€å”®æµç¨‹æŒæ¡ç†Ÿç»ƒï¼Œå„ç¯èŠ‚è¡”æ¥é¡ºç•…ï¼Œå®¢æˆ·éœ€æ±‚åˆ†ææ·±å…¥ï¼Œè¡¨ç°ä¼˜ç§€ï¼"
      }
    ],
    rankings: [
      {
        rank: 1,
        name: "å¼ ä¸‰",
        department: "é”€å”®ä¸€éƒ¨",
        overallScore: 92,
        completionRate: 100,
        improvement: 18,
        skills: {
          product: 95,
          communication: 90,
          objection: 88,
          closing: 94,
        },
      },
      {
        rank: 2,
        name: "æå››",
        department: "é”€å”®äºŒéƒ¨",
        overallScore: 89,
        completionRate: 95,
        improvement: 15,
        skills: {
          product: 90,
          communication: 92,
          objection: 85,
          closing: 89,
        },
      },
      {
        rank: 3,
        name: "ç‹äº”",
        department: "é”€å”®ä¸€éƒ¨",
        overallScore: 86,
        completionRate: 90,
        improvement: 12,
        skills: {
          product: 88,
          communication: 85,
          objection: 90,
          closing: 81,
        },
      },
      {
        rank: 4,
        name: "èµµå…­",
        department: "é”€å”®ä¸‰éƒ¨",
        overallScore: 83,
        completionRate: 85,
        improvement: 10,
        skills: {
          product: 85,
          communication: 80,
          objection: 82,
          closing: 85,
        },
      },
      {
        rank: 5,
        name: "é™ˆä¸ƒ",
        department: "é”€å”®äºŒéƒ¨",
        overallScore: 79,
        completionRate: 80,
        improvement: 8,
        skills: {
          product: 82,
          communication: 78,
          objection: 75,
          closing: 81,
        },
      },
    ],
    departmentStats: [
      {
        department: "é”€å”®ä¸€éƒ¨",
        members: 6,
        averageScore: 85,
        completionRate: 92,
        topSkill: "äº§å“çŸ¥è¯†",
      },
      {
        department: "é”€å”®äºŒéƒ¨",
        members: 5,
        averageScore: 83,
        completionRate: 88,
        topSkill: "æ²Ÿé€šæŠ€å·§",
      },
      {
        department: "é”€å”®ä¸‰éƒ¨",
        members: 4,
        averageScore: 80,
        completionRate: 85,
        topSkill: "å¼‚è®®å¤„ç†",
      },
    ],
  }

  const getRankColor = (rank: number): string => {
    switch (rank) {
      case 1:
        return "text-yellow-600 bg-yellow-50"
      case 2:
        return "text-gray-600 bg-gray-50"
      case 3:
        return "text-orange-600 bg-orange-50"
      default:
        return "text-blue-600 bg-blue-50"
    }
  }

  // å¤„ç†ç§¯åˆ†é€šçŸ¥
  const handleAwardPoints = (): void => {
    // éšæœºç”Ÿæˆç§¯åˆ†æ•°é‡ (5-20åˆ†)
    const points = Math.floor(Math.random() * 16) + 5;
    setPointsAwarded(points);
    setShowNotification(true);

    // 5ç§’åè‡ªåŠ¨å…³é—­é€šçŸ¥
    setTimeout(() => {
      setShowNotification(false);
    }, 5000);
  }

  // å¤„ç†è®­ç»ƒå®Œæˆé€šçŸ¥
  const handleTrainingCompletion = (): void => {
    // ç”Ÿæˆå½“å‰æ—¶é—´
    const now = new Date();
    const timeString = `${now.getFullYear()}-${(now.getMonth() + 1).toString().padStart(2, '0')}-${now.getDate().toString().padStart(2, '0')} ${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;

    // éšæœºç”Ÿæˆæ­£ç¡®ç‡ (60%-100%)
    const accuracy = Math.floor(Math.random() * 41) + 60;

    // æ ¹æ®æ­£ç¡®ç‡ç”Ÿæˆç§¯åˆ†å’Œåé¦ˆ
    let points = 0;
    let feedback = "";

    if (accuracy >= 90) {
      points = 20;
      feedback = "è¡¨ç°ä¼˜ç§€ï¼æ‚¨å¯¹é”€å”®åŸºç¡€çŸ¥è¯†çš„æŒæ¡éå¸¸æ‰å®ï¼Œç»§ç»­ä¿æŒï¼";
    } else if (accuracy >= 80) {
      points = 15;
      feedback = "è¡¨ç°è‰¯å¥½ï¼æ‚¨å¯¹å¤§éƒ¨åˆ†é”€å”®åŸºç¡€çŸ¥è¯†æŒæ¡å¾—ä¸é”™ï¼Œå¯ä»¥å†åŠ å¼ºè–„å¼±ç¯èŠ‚ã€‚";
    } else if (accuracy >= 70) {
      points = 10;
      feedback = "è¡¨ç°ä¸€èˆ¬ã€‚å»ºè®®æ‚¨å¤šå¤ä¹ é”€å”®åŸºç¡€çŸ¥è¯†ï¼ŒåŠ å¼ºç†è§£å’Œè®°å¿†ã€‚";
    } else {
      points = 5;
      feedback = "éœ€è¦åŠ å¼ºã€‚å»ºè®®æ‚¨é‡æ–°å­¦ä¹ é”€å”®åŸºç¡€çŸ¥è¯†ï¼Œå¤šåšç»ƒä¹ æé«˜ã€‚";
    }

    setTrainingData({
      type: "é”€å”®åŸºç¡€åŸ¹è®­ :é€‰æ‹©é¢˜è®­ç»ƒ",
      time: timeString,
      points,
      accuracy,
      feedback
    });

    setShowTrainingNotification(true);

    // 10ç§’åè‡ªåŠ¨å…³é—­é€šçŸ¥
    setTimeout(() => {
      setShowTrainingNotification(false);
    }, 10000);
  }

  const getScoreColor = (score: number): string => {
    if (score >= 90) return "text-green-600"
    if (score >= 80) return "text-blue-600"
    if (score >= 70) return "text-yellow-600"
    return "text-red-600"
  }

  const getRankIcon = (rank: number): string => {
    switch (rank) {
      case 1:
        return "ğŸ¥‡"
      case 2:
        return "ğŸ¥ˆ"
      case 3:
        return "ğŸ¥‰"
      default:
        return `#${rank}`
    }
  }

  // è·å–è¯„ä»·ç­‰çº§
  const getGradeLevel = (score: number): { text: string; color: string } => {
    if (score >= 90) return { text: "ä¼˜ç§€", color: "text-green-600" }
    if (score >= 80) return { text: "è‰¯å¥½", color: "text-blue-600" }
    if (score >= 70) return { text: "ä¸­ç­‰", color: "text-yellow-600" }
    return { text: "å¾…æé«˜", color: "text-red-600" }
  }

  // é¡µé¢åŠ è½½æ—¶è§¦å‘ç§¯åˆ†é€šçŸ¥
  useEffect(() => {
    handleAwardPoints();
  }, []);

  return (
    <div className="min-h-screen bg-background">
      {/* ç§¯åˆ†é€šçŸ¥ */}
      {showNotification && (
        <div className="fixed top-4 right-4 z-50 bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded-lg shadow-lg flex items-center animate-fadeIn">
          <div className="mr-2">ğŸ‰</div>
          <div>
            <p className="font-bold">æ­å–œè·å¾—ç§¯åˆ†ï¼</p>
            <p className="text-sm">æ‚¨å·²è·å¾— {pointsAwarded} ç§¯åˆ†</p>
          </div>
        </div>
      )}

      {/* è®­ç»ƒå®Œæˆé€šçŸ¥ */}
      {showTrainingNotification && (
        <div className="fixed top-4 right-4 z-50 bg-blue-100 border border-blue-400 text-blue-800 px-4 py-3 rounded-lg shadow-lg animate-fadeIn max-w-md">
          <div className="flex items-start">
            <div className="mr-3 text-xl">ğŸ“Š</div>
            <div>
              <p className="font-bold text-lg">è®­ç»ƒå®Œæˆï¼</p>
              <div className="mt-2 space-y-1">
                <p><span className="font-medium">è®­ç»ƒç±»å‹:</span> {trainingData.type}</p>
                <p><span className="font-medium">å®Œæˆæ—¶é—´:</span> {trainingData.time}</p>
                <p><span className="font-medium">è·å¾—ç§¯åˆ†:</span> {trainingData.points} åˆ†</p>
                <p><span className="font-medium">æ­£ç¡®ç‡:</span> {trainingData.accuracy}%</p>
              </div>
              <div className="mt-3 p-2 bg-blue-50 rounded">
                <p className="font-medium">è¯„ä»·åé¦ˆ:</p>
                <p className="text-sm">{trainingData.feedback}</p>
              </div>
            </div>
          </div>
        </div>
      )}

      {/* Header */}
      <header className="border-b border-border bg-card">
        <div className="container mx-auto px-4 py-4">
          <div className="flex items-center gap-4">
            <Link href="/">
              <Button variant="ghost" size="sm">
                <ArrowLeft className="w-4 h-4 mr-2" />
                è¿”å›é¦–é¡µ
              </Button>
            </Link>
            <h1 className="text-2xl font-bold text-foreground">ğŸ“Š ä¸ªäººæ•°æ®</h1>
            <Button
              onClick={handleTrainingCompletion}
              className="bg-blue-500 hover:bg-blue-600 text-white"
            >
              æ¨¡æ‹Ÿè®­ç»ƒå®Œæˆé€šçŸ¥
            </Button>
          </div>
        </div>
      </header>

      <div className="container mx-auto px-4 py-6">
        {/* Filters */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
          <div>
            <label className="text-sm font-medium mb-2 block">ä»»åŠ¡ç­›é€‰</label>
            <Select value={selectedTask} onValueChange={setSelectedTask}>
              <SelectTrigger>
                <SelectValue />
              </SelectTrigger>
              <SelectContent>
                <SelectItem value="all">å…¨éƒ¨ä»»åŠ¡</SelectItem>
                <SelectItem value="choice">é€‰æ‹©é¢˜è®­ç»ƒ</SelectItem>
                <SelectItem value="open">å¼€æ”¾é—®ç­”è®­ç»ƒ</SelectItem>
                <SelectItem value="dialogue">è‡ªç”±å¯¹è¯ç»ƒä¹ </SelectItem>
                <SelectItem value="role">é”€å”®è§’è‰²å®è®­</SelectItem>
              </SelectContent>
            </Select>
          </div>

          <div className="flex items-end">
            <Button variant="outline" className="w-full bg-transparent">
              <Download className="w-4 h-4 mr-2" />
              å¯¼å‡ºæŠ¥å‘Š
            </Button>
          </div>
        </div>

        {/* Team Overview */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
          <Card>
            <CardContent className="p-6">
              <div className="flex items-center gap-3">
                <Users className="w-8 h-8 text-primary" />
                <div>
                  <div className="text-2xl font-bold">{teamData.overview.trainingCount}</div>
                  <p className="text-sm text-muted-foreground">è®­ç»ƒæ¬¡æ•°</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardContent className="p-6">
              <div className="flex items-center gap-3">
                <BarChart3 className="w-8 h-8 text-blue-600" />
                <div>
                  <div className="text-2xl font-bold text-blue-600">{teamData.overview.averageScore}</div>
                  <p className="text-sm text-muted-foreground">å¹³å‡å¾—åˆ†</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardContent className="p-6">
              <div className="flex items-center gap-3">
                <Target className="w-8 h-8 text-green-600" />
                <div>
                  <div className="text-2xl font-bold text-green-600">{teamData.overview.completionRate}%</div>
                  <p className="text-sm text-muted-foreground">å®Œæˆç‡</p>
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardContent className="p-6">
              <div className="flex items-center gap-3">
                <Trophy className="w-8 h-8 text-yellow-600" />
                <div>
                  <div className="text-lg font-bold text-yellow-600">{teamData.overview.highestScore}</div>
                  <p className="text-sm text-muted-foreground">é«˜å¾—åˆ†</p>
                  <p className="text-xs text-muted-foreground">{teamData.overview.highestScoreDate}</p>
                </div>
              </div>
            </CardContent>
          </Card>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
          {/* Team Rankings / Training Records */}
          <div className="lg:col-span-3">
            <Card>
              <CardHeader>
                <CardTitle className="flex items-center gap-2">
                  {selectedTask === "choice" ? (
                    <>
                      <BookOpen className="w-5 h-5" />
                      é€‰æ‹©é¢˜è®­ç»ƒè®°å½•
                    </>
                  ) : selectedTask === "open" ? (
                    <>
                      <FileText className="w-5 h-5" />
                      å¼€æ”¾é—®ç­”è®­ç»ƒè®°å½•
                    </>
                  ) : selectedTask === "dialogue" ? (
                    <>
                      <MessageSquare className="w-5 h-5" />
                      è‡ªç”±å¯¹è¯ç»ƒä¹ è®°å½•
                    </>
                  ) : selectedTask === "role" ? (
                    <>
                      <User className="w-5 h-5" />
                      é”€å”®è§’è‰²å®è®­è®°å½•
                    </>
                  ) : (
                    <>
                      <Award className="w-5 h-5" />
                      å›¢é˜Ÿæ’å
                    </>
                  )}
                </CardTitle>
              </CardHeader>
              <CardContent>
                {(selectedTask === "choice" || selectedTask === "open") ? (
                  // æ˜¾ç¤ºåŸ¹è®­è®°å½•
                  <div className="space-y-4">
                    {(selectedTask === "choice" ? teamData.trainingRecords : teamData.openTrainingRecords).map((record) => (
                      <div key={record.id} className="border rounded-lg p-4 hover:shadow-md transition-shadow">
                        <div className="flex items-center justify-between mb-3">
                          <div>
                            <h4 className="font-semibold">{record.title}</h4>
                            <p className="text-sm text-muted-foreground">{record.date} Â· {record.duration}</p>
                          </div>
                          <div className="text-right">
                            <div className={`text-lg font-bold ${getScoreColor(record.score)}`}>
                              {record.score}
                            </div>
                            <p className="text-xs text-muted-foreground">å¾—åˆ†</p>
                          </div>
                        </div>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                          <div className="text-center">
                            <div className="font-medium text-green-600">{record.status}</div>
                            <div className="text-muted-foreground">çŠ¶æ€</div>
                          </div>
                          <div className="text-center">
                            <div className="font-medium">{record.questions}é¢˜</div>
                            <div className="text-muted-foreground">é—®é¢˜æ•°é‡</div>
                          </div>
                          {selectedTask === "choice" && record.correct !== undefined ? (
                            <>
                              <div className="text-center">
                                <div className="font-medium">{record.correct}é¢˜</div>
                                <div className="text-muted-foreground">æ­£ç¡®æ•°</div>
                              </div>
                              <div className="text-center">
                                <div className="font-medium text-blue-600">
                                  {Math.round((record.correct / record.questions) * 100)}%
                                </div>
                                <div className="text-muted-foreground">æ­£ç¡®ç‡</div>
                              </div>
                            </>
                          ) : (
                            <>
                              <div className="text-center">
                                <div className="font-medium">{record.date}</div>
                                <div className="text-muted-foreground">æ—¶é—´</div>
                              </div>
                              <div className="text-center">
                                <div className="font-medium">{record.attitude || "æŠ•å…¥"}</div>
                                <div className="text-muted-foreground">æ€åº¦</div>
                              </div>
                            </>
                          )}
                        </div>

                        <div className="mt-3 pt-3 border-t">
                          <h5 className="text-sm font-medium mb-2">{selectedTask === "choice" ? "è¯„ä»·åé¦ˆ" : "ç»¼åˆè¯„ä»·"}</h5>
                          <p className="text-sm text-muted-foreground">{record.feedback}</p>
                        </div>
                      </div>
                    ))}
                  </div>
                ) : (
                  // æ˜¾ç¤ºå›¢é˜Ÿæ’å
                  <div className="space-y-4">
                    {teamData.rankings.map((member) => (
                      <div key={member.rank} className="border rounded-lg p-4 hover:shadow-md transition-shadow">
                        <div className="flex items-center justify-between mb-3">
                          <div className="flex items-center gap-3">
                            <div
                              className={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${getRankColor(member.rank)}`}
                            >
                              {getRankIcon(member.rank)}
                            </div>
                            <div>
                              <h4 className="font-semibold">{member.name}</h4>
                              <p className="text-sm text-muted-foreground">{member.department}</p>
                            </div>
                          </div>
                          <div className="text-right">
                            <div className={`text-lg font-bold ${getScoreColor(member.overallScore)}`}>
                              {member.overallScore}
                            </div>
                            <p className="text-xs text-muted-foreground">ç»¼åˆå¾—åˆ†</p>
                          </div>
                        </div>

                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                          <div className="text-center">
                            <div className="font-medium text-green-600">{member.completionRate}%</div>
                            <div className="text-muted-foreground">å®Œæˆç‡</div>
                          </div>
                          <div className="text-center">
                            <div className="font-medium text-blue-600">+{member.improvement}%</div>
                            <div className="text-muted-foreground">æå‡å¹…åº¦</div>
                          </div>
                          <div className="text-center">
                            <div className="font-medium">{member.skills.product}</div>
                            <div className="text-muted-foreground">äº§å“çŸ¥è¯†</div>
                          </div>
                          <div className="text-center">
                            <div className="font-medium">{member.skills.communication}</div>
                            <div className="text-muted-foreground">æ²Ÿé€šæŠ€å·§</div>
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                )}
              </CardContent>
            </Card>
          </div>
        </div>
      </div>
    </div>
  )
}